<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Nice Org to HTML pipeline</title>
<meta name="generator" content="Org Mode" />
<style type='text/css'>
<!--/*--><![CDATA[/*><!--*/
/* nice-org-html.css
;;==============================================================================
;; Copyright (C) 2024, Ewan Townshend

;; Author: Ewan Townshend
;; URL: https://github.com/ewantown/nice-org-html
;; Version: 1.2

;;==============================================================================
;; This program is free software; you can redistribute it and/or modify
;; it under the terms of the GNU General Public License as published by
;; the Free Software Foundation, either version 3 of the License, or
;; (at your option) any later version.

;; This program is distributed in the hope that it will be useful,
;; but WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;; GNU General Public License for more details.

;; You should have received a copy of the GNU General Public License
;; along with this program.  If not, see <https://www.gnu.org/licenses/>.

;; This file is not part of emacs.

;;==============================================================================
*/

/* basic layout ***************************************************************/
*,
*::before,
*::after {
    box-sizing: border-box;
}
html {
    font-family: Sans;
    line-height: 1.3;
    font-size: calc(15px + 0.390625vw);
    -webkit-text-size-adjust: 100%;
}

body {
    background: #999; /* overwritten with theme --bg */
    width: 100%;
    min-height: 100vh;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family:
	-apple-system,
	BlinkMacSystemFont,
	segoe ui,
	Roboto,
	Oxygen,
	Ubuntu,
	Cantarell,
	open sans,
	helvetica neue,
	sans-serif,
	system-ui
}

#preamble,
#postamble {
    width: 100%;
}

#content {
    width: 80%;
    max-width: 80ch;
    margin-left: 1rem;
    margin-right: 1rem;
    flex: 1;
}

/* custom facing **************************************************************/
/* The variable values are injected by CSS pre-processing in et-org-html.el */
:root {
    --bc-tb: #eee8d5;
    --bc-block: #93a1a1;
    --clr: #657b83;
    --clr-tb-hd: #657b83;
    --clr-code: #657b83;
    --bg: #fdf6e3;
    --bg-code: #eee8d5;
    --bg-tb-hd: #eee8d5;
    --bg-block: initial;
    --clr-link: #268bd2;
    --clr-title: #657b83;
    --clr-todo: #2aa198;
    --bg-todo: initial;
    --clr-done: #93a1a1;
    --bg-done: initial;
    --ts-clr: #859900;
    --mg: 20px;
    --w-toc: 300px;
    --bg-keyword: initial;
    --clr-keyword: #859900;
    --bg-constant: initial;
    --clr-constant: #268bd2;
    --bg-comment: initial;
    --clr-comment: #93a1a1;
    --bg-comment-delimiter: initial;
    --clr-comment-delimiter: #93a1a1;
    --bg-function: initial;
    --clr-function: #268bd2;
    --bg-variable: initial;
    --clr-variable: #268bd2;
    --bg-preprocessor: initial;
    --clr-preprocessor: #268bd2;
    --bg-doc: initial;
    --clr-doc: #2aa198;
    --bg-builtin: initial;
    --clr-builtin: #657b83;
    --bg-string: initial;
    --clr-string: #2aa198;
    --clr-note: #FFC0CB;
    --clr-tip: #1a7f37;
    --clr-important: #8250df;
    --clr-warning: #9a6700;
    --clr-caution: #cf222e;
}

body[data-mode='light'] {
    background: var(--bg);
    color: var(--clr);
}

body[data-mode='dark'] {
    background: var(--bg);
    color: var(--clr);
    --bc-tb: #cccccc;
    --bc-block: initial;
    --clr: #cccccc;
    --clr-code: #cccccc;
    --clr-tb-hd: #cccccc;
    --bg: #2d2d2d;
    --bg-tb-hd: #515151;
    --bg-code: #515151;
    --bg-block: initial;
    --clr-link: #66cccc;
    --clr-title: #cccccc;
    --clr-todo: #99cc99;
    --bg-todo: initial;
    --clr-done: #999999;
    --bg-done: initial;
    --ts-clr: #cc99cc;
    --mg: 20px;
    --w-toc: 300px;
    --bg-keyword: initial;
    --clr-keyword: #cc99cc;
    --bg-constant: initial;
    --clr-constant: #66cccc;
    --bg-comment: initial;
    --clr-comment: #999999;
    --bg-comment-delimiter: initial;
    --clr-comment-delimiter: #999999;
    --bg-function: initial;
    --clr-function: #6699cc;
    --bg-variable: initial;
    --clr-variable: #f99157;
    --bg-preprocessor: initial;
    --clr-preprocessor: #cc99cc;
    --bg-doc: initial;
    --clr-doc: #999999;
    --bg-builtin: initial;
    --clr-builtin: #66cccc;
    --bg-string: initial;
    --clr-string: #99cc99;
    --clr-note: #0969da;
    --clr-tip: #1a7f37;
    --clr-important: #8250df;
    --clr-warning: #9a6700;
    --clr-caution: #cf222e;
}

/* exceptions for badly rendering themes **************************************/
body[data-theme='leuven'],
body[data-theme='leuven-dark'] {
    --bg-code: var(--bg-block);
}

/* ootb page layout ***********************************************************/
#view-controls {
    position: sticky;
    display: flex;
    align-items: center;
    justify-content: center;
    top: 0;
    left: 0;
    width: 100%;
    background: var(--bg);
    color: var(--clr-code);
    height: 2.5rem;
    padding-top: 1.25rem;
    padding-bottom: 1.25rem;
    z-index: 100;
    border-radius: 5px; /* Rounded corners */
}
#toggle-mode {
    position: absolute;
    right: 5%;
    display: block;
    text-align: center;
    font-size: 1.5rem;
    background: var(--bg);
    color: var(--clr-code);
    padding: 0.25rem 0;
}
#goto-top {
    display: none;
}
#goto-top[data-show="true"] {
    position: relative;
    display: block;
    text-align: center;
    font-size: 1rem;
    background: var(--bg);
    color: var(--clr-code);
    padding: 0.25rem 0;
}
#toggle-toc {
    display: none;
}
#toggle-toc[data-show="true"] {
    position: absolute;
    left: 5%;
    display: block;
    text-align: center;
    font-size: 1.5rem;
    background: var(--bg);
    color: var(--clr-code);
    padding: 0.25rem 0;
}

#toggle-toc:hover,
#goto-top:hover,
#toggle-mode:hover {
    cursor: pointer;
}

#table-of-contents {
    display: none;
}
#table-of-contents[data-show="true"] {
    width: 80%;
    max-width: 80rem;
    margin-left: 1rem;
    margin-right: 1rem;
    background: var(--bg);
    scrollbar-width: none;
    -ms-overflow-style: none;
}

#table-of-contents::-webkit-scrollbar {
    display: none;
}

body[data-toc="true"] #content * {
    display: none;
}
body[data-toc="true"] #content #table-of-contents,
body[data-toc="true"] #content #table-of-contents * {
    display: block;
}


/* misc elements **************************************************************/

hr {
    height: 0;
    color: inherit;
}

b,
strong {
    font-weight: bolder;
}

code,
kbd,
samp,
pre {
    font-family:
	Menlo,
	ui-monospace,
	SFMono-Regular,
	Consolas,
	'Liberation Mono',
	monospace;
}

small {
    font-size: 80%;
}

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sub {
    bottom: -0.25em;
}

sup {
    top: -0.5em;
}

table {
    text-indent: 0;
    border-color: inherit;
}

summary {
    display: list-item;
}

h1 {
    color: var(--clr-title);
    text-align: center;
}
h2 {
    margin-top: 2rem;
    margin-bottom: 1rem;
}

code {
    color: var(--clr-code);
    background: var(--bg-code);
    border-radius: 2px;
    padding-left: 5px;
    padding-right: 5px;
}

pre::-webkit-scrollbar {
    display: none;
}

.todo {
    color: var(--clr-todo);
    background: var(--bg-todo);
}

.done {
    color: var(--clr-done);
    background: var(--bg-done);
}

.timestamp-wrapper {
    font-size: 0.8rem;
    color: var(--clr-ts);
}

table {
    width: 100%;
    border: 2px solid var(--bc-tb);
}

thead {
    color: var(--clr-tb-hd);
    background: var(--bg-tb-hd);
}

td, th {
    border: thin solid var(--bc-tb);
}

li {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}
#text-table-of-contents li a:before {
    content: "• "
}

a {
    text-decoration: none;
    color: var(--clr-link);
}

a:hover {
    text-decoration: underline;
}

.MathJax_Display {
    font-size: 1.25em;
}

img {
    max-width: 100%;
}

pre {
    padding: 1rem;
    border: 1px solid var(--bc-block);
    border-radius: 0.5rem;
    background: var(--bg-block);
    font-size: 0.9rem;
    overflow-x: auto;
    -ms-overflow-style: none;
    scrollbar-width: thin;
}

.org-src-wrapper {
    position: relative;
    border: 1px solid var(--bc-block);
    border-radius: 0.5rem;
    background: var(--bg-code);
}

.org-src-bar {
    position: relative;
    top: 0rem;
    width: 100%;
    background: var(--bg-code);
    border-radius: 0.5rem;
    text-align: right;
    min-height: 1rem;
}

.org-src-wrapper .org-src-container {
    position: relative;
    border: none;
    border-radius: 0.5rem;
    background: var(--bg-code);
    z-index: 0;
}

.org-src-wrapper .org-src-container pre.src {
    border: none !important;
    background: var(--bg-code) !important;
    padding-top: 0rem;
    padding-bottom: 0rem;
    margin-top: 0rem;
    margin-bottom: 0rem;
    padding-bottom: 1.6rem;
}

.org-src-wrapper .org-src-bar .srcLangLabel {
    top: 0rem;
    right: 1.6rem;
    background-color: transparent;
    color: var(--clr-doc);
    border: none;
    padding: 0.5rem;
    padding-bottom: 0.3rem;
    text-align: center;
    text-decoration: none;
    font-size: 0.8rem;
    opacity: 0.5;
    z-index: 1;
    display: none;
}

.org-src-wrapper .org-src-bar .copyBtn {
    top: 0rem;
    right: 0.1rem;
    background-color: transparent;
    color: var(--clr-doc);
    border: none;
    padding: 0.5rem;
    padding-right: 0.7rem;
    padding-bottom: 0.3rem;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 0.8rem;
    cursor: pointer;
    opacity: 0.5;
    z-index: 1;
    transition: opacity 0.3s;
}

.org-src-wrapper .copyBtn:hover {
    opacity: 1;
}

.org-src-wrapper .copyBtn i {
    margin-right: 0.5rem;
    padding: 0.5rem;
}

.admonition {
    margin: 0.2rem;
    color: inherit;
    border-left: .25rem solid;
}
.admonition-title {
    margin: 0 0 0.5rem 0.5rem;
    padding: 0.5rem 0 0 0;
    display: flex;
    align-items: center;
}
.admonition-content > p {
    margin: 0.5rem 0 0 0.5rem;
    padding: 0 0 0.5rem 0;
}

.admonition.note {
    border-left-color: var(--clr-note);
}
.admonition-title.note {
    color: var(--clr-note);
}
.admonition-title.note:before {
    content: '';
    display: inline-block;
    margin-right: 0.25rem;
    width: 1rem;
    height: 1rem;
    background-color: var(--clr-note);
    mask-size: cover;    
    mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="false"><path class="admonition-icon-note" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>');    
}
.admonition-icon-note {
    fill: var(--clr-note);
}

.admonition.tip {
    border-left-color: var(--clr-tip);
}
.admonition-title.tip {
    color: var(--clr-tip);
}
.admonition-title.tip:before {
    content: '';
    fill: var(--clr-tip);    
    display: inline-block;
    margin-right: 0.25rem;
    width: 1rem;
    height: 1rem;
    background-color: var(--clr-tip);
    mask-size: cover;
    mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="false"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>');    
}

.admonition.important {
    border-left-color: var(--clr-important);
}
.admonition-title.important {
    color: var(--clr-important);
}
.admonition-title.important:before {
    content: '';
    fill: var(--clr-important);    
    display: inline-block;
    margin-right: 0.25rem;
    width: 1rem;
    height: 1rem;
    background-color: var(--clr-important);
    mask-size: cover;
    mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="false"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>');    
}

.admonition.warning {
    border-left-color: var(--clr-warning);
}
.admonition-title.warning {
    color: var(--clr-warning);
}
.admonition-title.warning:before {
    content: '';
    color: var(--clr-warning);    
    display: inline-block;
    margin-right: 0.25rem;
    width: 1rem;
    height: 1rem;
    background-color: var(--clr-warning);
    mask-size: cover;
    mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="false"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>');
}


.admonition.caution {
    border-left-color: var(--clr-caution);
}
.admonition-title.caution {
    color: var(--clr-caution);
}
.admonition-title.caution:before {
    content: '';
    fill: var(--clr-caution);    
    display: inline-block;
    margin-right: 0.25rem;
    width: 1rem;
    height: 1rem;
    background-color: var(--clr-caution);
    mask-size: cover;
    mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="false"><path d="M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>');    
}
/* responsive layouts *********************************************************/

@media only screen and (max-width: 768px) {
    #toggle-toc[data-show='true'] {
	padding-right: 5%;
    }
    #toggle-mode {
	padding-left: 5%;
    }
    #content {
	width: 90%;
    }
}

@media only screen and (max-width: 480px) {
    #view-controls {
	padding-top: 1.5em;
	padding-bottom: 1.5em;
    }
    #toggle-toc[data-show='true'] {
	padding-right: 5%;
    }
    #toggle-mode {
	padding-left: 5%;
    }
    #content {
	width: 90%;
    }
}


/* generated header and footer ************************************************/

#generated-header,
#generated-footer {
    width: 90%;
    margin-left: 5%;
    margin-right: 5%;
    line-height: 1;
}
.generated header {
    top: 0;
    left: 0;
}
.generated footer {
    bottom: 0;
    left: 0;
}
.generated header a,
.generated footer a {
    display: inline;
    color: var(--clr-title);
    text-decoration: none;
    transition: color .15s ease-in;
}
.generated header a:hover,
.generated footer a:hover {
    color: var(--clr-link);
}

.generated header nav {
    position: relative;
    margin-top: 1rem;
    top: 0;
    left: 0;
}
.generated footer nav {
    position: relative;
    bottom: 0;
    left: 0;
}

.generated .separator {
    display: block;
    width: 111%;
    margin-left: -5.5%;
    max-width: 100vw;
    height: 0.125rem;
    background: var(--bg-code);
}

.generated a .nav-title,
.generated a .nav-author {
    display: inline;
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding-right: 10rem;
}

.generated .nav-title {
    letter-spacing: .075rem;
    font-weight: 500;
}

.generated .nav-toggle {
    display: none;
}
.generated .nav-button {
    display: none;
}
.generated .nav-list {
    overflow-y: hidden;
    display: block;
    float: right;
    list-style: none;
    margin-bottom: 0;
    margin-top: 0;
}

.generated .nav-item {
    position: relative;
    float: left;
    margin: 0;
}
.generated .nav-link {
    position: relative;
    float: right;
    margin-left: 2rem;
    margin-right: 0rem;
}

.generated .nav-toggle {
    max-height: 0;
    visibility: hidden;
    overflow-y: hidden;
}

.generated header .separator {
    margin-top: 1rem;
    margin-bottom: 0;
}

.generated footer .separator {
    margin-bottom: 1rem;
    margin-top: 0;
}

.generated .menu-sep {
    display: none;
    max-height: 0;
    overflow-y: hidden;
    transition: max-height 0.2s ease;
}

.generated footer {
    padding-bottom: 1rem;
}

.generated.compact footer {
    padding-bottom: 0;
}

.generated.compact header .separator {
    margin-top: 0;
    margin-bottom:0;
}
.generated.compact footer .separator {
    margin-bottom: 1rem;
}

.generated.compact .nav-toggle {
    visibility: visible;
}

.generated.compact .nav-toggle + label span::before {
    transition: all 0.2s ease-in;
}
.generated.compact .nav-toggle:checked + label span::before {
    transform: translateX(0.04rem) translateY(-0.25rem) rotate(90deg);
    transition: all 0.2s ease;
}

.generated.compact .menu-sep {
    display: flex;
    max-height: 0rem;
}
.generated.compact .nav-toggle:checked + label + .menu-sep {
    display: block;
    position: relative;
    max-height: 1rem;
    transition: max-height 0.2s ease;
}

.generated.compact .nav-list {
    float: none !important;
    position: relative;
    display: block;
    padding-left: 0;
    padding-right: 0;
    z-index: 5;
    width: 100%;
    height: auto;
    max-height: 0;
    margin: 0;
    overflow-x: hidden;
    overflow-y: hidden;
    transition: max-height 0.2s ease;
}
.generated.compact .nav-toggle:checked + label ~ .nav-list {
    display: block;
    max-height: 100rem;
    overflow-y: hidden;
}
.generated.compact header .nav-toggle:checked + label ~ .nav-list {
    transition: max-height 0.2s ease;
}

.generated.compact .nav-button {
    display: inline;
    position: relative;
    float: right;
    font-size: 1rem;
}
.generated.compact .nav-button span::before {
    display: inline-block;
    content: '\2807';
    font-size: 2rem;
    transform: translateX(0.25rem) translateY(-0.5rem);
}

.generated.compact .nav-item {
    float: none !important;
    text-align: center !important;
}
.generated.compact .nav-link {
    line-height: 2rem;
    margin-left: 2rem;
    margin-right: 2rem;
    float: none !important;
}

.generated.compact footer .separator.menu-sep {
    margin-bottom: -1rem;
}

.hidden {
    display: none;
}

.collapsible:hover {
    cursor: pointer;
}

.collapsible.collapsed::after {
    display: inline-block;
    content: '...';
}
h6::before { content: '';
margin-right: calc(0 * 0.26em);
}
h5::before { content: '';
margin-right: calc(0 * 0.25em);
}
h4::before { content: '';
margin-right: calc(0 * 0.24em);
}
h3::before { content: '▷';
margin-right: calc(3 * 0.23em);
}
h2::before { content: '';
margin-right: calc(0 * 0.22em);
}
/*]]>*/-->
</style>
</head>
<body>
<div id="preamble" class="status">
<div id='view-controls'><div id='toggle-mode' title='Mode'>&#9788;</div><div id='goto-top' title='Top'>&#8963;</div><div id='toggle-toc' title='Contents'>&#9776;</div></div>
</div>
<div id="content" class="content">
<h1 class="title">Nice Org to HTML pipeline</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org71d32d6">tl;dr</a></li>
<li><a href="#orge3b9280">About this package</a></li>
<li><a href="#org208c042">How to use it</a>
<ul>
<li><a href="#orgf331017">Setup</a></li>
<li><a href="#org1b483c3">Exporting</a></li>
<li><a href="#org939102f">Publishing</a></li>
</ul>
</li>
<li><a href="#orgc4b494b">Things to keep in mind</a></li>
<li><a href="#orgc377426">Contributing</a></li>
<li><a href="#org18a30ae">Credits</a></li>
</ul>
</div>
</div>
<div id="outline-container-org71d32d6" class="outline-2">
<h2 id="org71d32d6">tl;dr</h2>
<div class="outline-text-2" id="text-org71d32d6">
<p>
This package generates pretty, responsive, websites from .org files and your choice of Emacs themes. You can optionally specify a header, footer, and additional CSS and JS to be included. To see the default output, for my chosen themes and with no header, footer or extras, view this README in your browser <a href="https://etown.dev/nice-org-html/">here</a>. If you're already there, you can find the GitHub repo <a href="https://github.com/ewantown/nice-org-html">here</a>.
</p>

<p>
With the README I also publish these samples, which include a list-specified header and footer:
</p>

<ul class="org-ul">
<li><a href="https://etown.dev/nice-org-html/samples/solarized/sample">solarized</a></li>
<li><a href="https://etown.dev/nice-org-html/samples/spacemacs/sample">spacemacs</a></li>
<li><a href="https://etown.dev/nice-org-html/samples/eighties-jazz/sample">eighties-jazz</a></li>
<li><a href="https://etown.dev/nice-org-html/samples/ample-zenburn/sample">ample-zenburn</a></li>
<li><a href="https://etown.dev/nice-org-html/samples/tomorrow/sample">tomorrow</a></li>
<li><a href="https://etown.dev/nice-org-html/samples/leuven/sample">leuven</a></li>
<li><a href="https://etown.dev/nice-org-html/samples/modus/sample">modus</a></li>
<li><a href="https://etown.dev/nice-org-html/samples/tsdh/sample">tsdh</a></li>
</ul>
</div>
</div>
<div id="outline-container-orge3b9280" class="outline-2">
<h2 id="orge3b9280">About this package</h2>
<div class="outline-text-2" id="text-orge3b9280">
<p>
<b>nice-org-html</b> defines an Emacs pipeline for <a href="https://orgmode.org/manual/Exporting.html">exporting</a> Org files, or <a href="https://www.gnu.org/software/emacs/manual/html_node/org/Publishing.html">publishing</a> Org projects, to HTML. The generated HTML is optimized for readability and responsiveness, esp. of documents that include code, and makes it easy to achieve a custom look-and-feel, in part by leveraging the variety of themes available for Emacs. Under the hood, this is achieved by:
</p>

<ol class="org-ol">
<li>Extracting colors from user-specified themes, inserting these in a CSS template (nice-org-html.css), and injecting the result into a <code>&lt;style&gt;</code> element.</li>
<li>Inserting toggle-buttons for light- and dark-mode viewing, and a click-to-jump table-of-content view, governed by the included scripts (nice-org-html.js).</li>
<li>Extending the default org-to-html export backend to include copy-to-clipboard buttons for source blocks.</li>
<li>Injecting (optional) header and footer, CSS styling, and JS scripts.</li>
</ol>
</div>
</div>
<div id="outline-container-org208c042" class="outline-2">
<h2 id="org208c042">How to use it</h2>
<div class="outline-text-2" id="text-org208c042">
</div>
<div id="outline-container-orgf331017" class="outline-3">
<h3 id="orgf331017">Setup</h3>
<div class="outline-text-3" id="text-orgf331017">
<ul class="org-ul">
<li><p>
Get the source files on your load path. E.g. with MELPA and use-package:
</p>
<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>EMACS-LISP</span><button class='copyBtn' name=btn_1448bb02131848c9bab2d5aadc99e393>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_1448bb02131848c9bab2d5aadc99e393=document.querySelector('button[name=btn_1448bb02131848c9bab2d5aadc99e393]');
copyBtnbtn_1448bb02131848c9bab2d5aadc99e393.addEventListener('click', function(event) {
let res = copyTextToClipboard(`(require 'package)\n(add-to-list 'package-archives\n             '(\"melpa\" . \"http://melpa.org/packages/\"))\n(package-initialize)\n\n(unless (package-installed-p 'use-package)\n  (package-install 'use-package))\n`);copyBtnbtn_1448bb02131848c9bab2d5aadc99e393.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_1448bb02131848c9bab2d5aadc99e393.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">require</span> '<span style="color: var(--clr-constant); background-color: var(--bg-constant);">package</span>)
(add-to-list 'package-archives
             '(<span style="color: var(--clr-string); background-color: var(--bg-string);">"melpa"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"http://melpa.org/packages/"</span>))
(package-initialize)

(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">unless</span> (package-installed-p 'use-package)
  (package-install 'use-package))
</pre>
</div></div></li>

<li><p>
Add something like this to your configuration file:
</p>
<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>EMACS-LISP</span><button class='copyBtn' name=btn_01adaa47a1ec4872820b4cc3b88ef5e1>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_01adaa47a1ec4872820b4cc3b88ef5e1=document.querySelector('button[name=btn_01adaa47a1ec4872820b4cc3b88ef5e1]');
copyBtnbtn_01adaa47a1ec4872820b4cc3b88ef5e1.addEventListener('click', function(event) {
let res = copyTextToClipboard(`(use-package nice-org-html\n  :hook (org-mode . nice-org-html-mode)\n  :config\n  (setq nice-org-html-theme-alist\n        '((light . solo-jazz)\n          (dark  . tomorrow-night-eighties)))\n  (setq nice-org-html-default-mode 'dark)\n  (setq nice-org-html-headline-bullets nil) \n`);copyBtnbtn_01adaa47a1ec4872820b4cc3b88ef5e1.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_01adaa47a1ec4872820b4cc3b88ef5e1.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">use-package</span> nice-org-html
  <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:hook</span> (org-mode . nice-org-html-mode)
  <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:config</span>
  (<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-theme-alist
        '((light . solo-jazz)
          (dark  . tomorrow-night-eighties)))
  (<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-default-mode 'dark)
  (<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-headline-bullets nil) 
</pre>
</div></div></li>
<li>If values for any of these variables are <i>not</i> specified, these defaults will be used:
<ul class="org-ul">
<li>Themes: <code>tsdh-light</code> and <code>tsdh-dark</code> distributed with GNU Emacs</li>
<li>Default viewing mode: <code>'query</code>
<ul class="org-ul">
<li>This will check against the visitor's browser-set preference, and default to <code>'dark</code> if no preference is specified. Anti-fingerprinting settings may prevent reading the browser setting, or cause the browser to mask it (usually, by showing a preference for <code>'light</code>).</li>
</ul></li>
<li>Headline bullets: <code>'nil</code> &#x2013; i.e. bullets will <i>not</i> be prefixed to headlines
<ul class="org-ul">
<li><p>
To prefix headlines with the default bullets, instead use:
</p>
<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>EMACS-LISP</span><button class='copyBtn' name=btn_1c8ab45f91ff499196330c99043d49c8>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_1c8ab45f91ff499196330c99043d49c8=document.querySelector('button[name=btn_1c8ab45f91ff499196330c99043d49c8]');
copyBtnbtn_1c8ab45f91ff499196330c99043d49c8.addEventListener('click', function(event) {
let res = copyTextToClipboard(`(setq nice-org-html-headline-bullets t)\n`);copyBtnbtn_1c8ab45f91ff499196330c99043d49c8.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_1c8ab45f91ff499196330c99043d49c8.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-headline-bullets t)
</pre>
</div></div></li>
<li><p>
Or you can specify headline bullets with a plist like this (the defaults):
</p>
<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>EMACS-LISP</span><button class='copyBtn' name=btn_00563e1c93c9484887ab9ce4d0616615>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_00563e1c93c9484887ab9ce4d0616615=document.querySelector('button[name=btn_00563e1c93c9484887ab9ce4d0616615]');
copyBtnbtn_00563e1c93c9484887ab9ce4d0616615.addEventListener('click', function(event) {
let res = copyTextToClipboard(`(setq nice-org-html-headline-bullets\n      '(:h1 \"◉\" :h2 \"✸\" :h3 \"▷\" :h4 \"⦁\" :h5 \"○\"))\n`);copyBtnbtn_00563e1c93c9484887ab9ce4d0616615.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_00563e1c93c9484887ab9ce4d0616615.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-headline-bullets
      '(<span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h1</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"&#9673;"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h2</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"&#10040;"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h3</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"&#9655;"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h4</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"&#10625;"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h5</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"&#9675;"</span>))
</pre>
</div></div></li>
</ul></li>
</ul></li>
<li><i>Admonitions</i> are the only HTML elements with colours guaranteed to be independent of your choice of source theme
<ul class="org-ul">
<li><p>
Admonitions are rendered from these org special blocks: _note, _tip, _important, _warning, _caution
</p>

<div class='admonition note'><div class='admonition-title note'>Note</div><div class='admonition-content note'><p>
This is a note
</p>
</div></div>

<div class='admonition tip'><div class='admonition-title tip'>Tip</div><div class='admonition-content tip'><p>
This is a tip
</p>
</div></div>

<div class='admonition warning'><div class='admonition-title warning'>Warning</div><div class='admonition-content warning'><p>
This is a warning
</p>
</div></div>

<div class='admonition important'><div class='admonition-title important'>Important</div><div class='admonition-content important'><p>
This is important
</p>
</div></div>

<div class='admonition caution'><div class='admonition-title caution'>Caution</div><div class='admonition-content caution'><p>
This is a caution
</p>
</div></div></li>

<li><p>
The colours of these blocks can be custom-set to hex values by modifying the variable <code>nice-org-html-clr-defs</code>:
</p>
<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>ELISP</span><button class='copyBtn' name=btn_59cd2872ec71401a90db61c493bc15c5>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_59cd2872ec71401a90db61c493bc15c5=document.querySelector('button[name=btn_59cd2872ec71401a90db61c493bc15c5]');
copyBtnbtn_59cd2872ec71401a90db61c493bc15c5.addEventListener('click', function(event) {
let res = copyTextToClipboard(`(setq nice-org-html-clr-defs\n      ((light . (:note \"#0969da\" :tip \"#1a7f37\" :important \"#8250df\" :warning \"#9a6700\" :caution \"#cf222e\"))\n       (dark  . (:note \"#0969da\" :tip \"#1a7f37\" :important \"#8250df\" :warning \"#9a6700\" :caution \"#cf222e\"))))\n`);copyBtnbtn_59cd2872ec71401a90db61c493bc15c5.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_59cd2872ec71401a90db61c493bc15c5.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-elisp">(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-clr-defs
      ((light . (<span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:note</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#0969da"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:tip</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#1a7f37"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:important</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#8250df"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:warning</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#9a6700"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:caution</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#cf222e"</span>))
       (dark  . (<span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:note</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#0969da"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:tip</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#1a7f37"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:important</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#8250df"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:warning</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#9a6700"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:caution</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#cf222e"</span>))))
</pre>
</div></div>
<p>
or declaring some value(s) for <code>:clr-defs</code> in a call to the <code>nice-org-html-publishing-function</code> macro, discussed below.
</p></li>
</ul></li>

<li><p>
Further look-and-feel customization is handled through the <code>nice-org-html-options</code> plist. The following properties and values are supported (so far):
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Property</th>
<th scope="col" class="org-left">Value</th>
<th scope="col" class="org-left">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">:layout</td>
<td class="org-left">"compact"</td>
<td class="org-left">Header and footer links always contained in drawer</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">:layout</td>
<td class="org-left">"expanded"</td>
<td class="org-left">Header and footer links never contained in drawer</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">:collapsing</td>
<td class="org-left">t</td>
<td class="org-left">Clicking headlines collapses / expands sections</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">:src-lang</td>
<td class="org-left">t</td>
<td class="org-left">Source language displayed in header of source blocks</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
</div>
<div id="outline-container-org1b483c3" class="outline-3">
<h3 id="org1b483c3">Exporting</h3>
<div class="outline-text-3" id="text-org1b483c3">
<ul class="org-ul">
<li>After loading this package and hooking nice-org-html-mode to org-mode, when you open an Org buffer, nice-org-html-mode will activate.</li>

<li>If you then interactively export your Org buffer via the dispatcher (C-c C-e), you will be presented with options to export to 'nice HTML', in addition to the basic HTML export options.</li>

<li>When exporting to 'nice HTML', you will be prompted for (all optional) options plist, header and footer, and CSS and JS filepaths. If specified, the contents of those variables will be injected, accordingly, into the generated HTML. 
<ul class="org-ul">
<li>CSS and JS must be paths (strings) to files with contents to be injected.</li>
<li>Header and footer may be a path to an HTML file, or a list of cons pairs.</li>
<li><p>
A default HTML structure will be used for the header and/or footer, if a list of this form:
</p>
<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>EMACS-LISP</span><button class='copyBtn' name=btn_13a95d55e2c845c186b5eef9aa9c40be>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_13a95d55e2c845c186b5eef9aa9c40be=document.querySelector('button[name=btn_13a95d55e2c845c186b5eef9aa9c40be]');
copyBtnbtn_13a95d55e2c845c186b5eef9aa9c40be.addEventListener('click', function(event) {
let res = copyTextToClipboard(`'((\"left\" . uri0) (\"link1\" . \"uri1\") ... (\"linkN\" . \"uriN\"))\n`);copyBtnbtn_13a95d55e2c845c186b5eef9aa9c40be.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_13a95d55e2c845c186b5eef9aa9c40be.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-emacs-lisp">'((<span style="color: var(--clr-string); background-color: var(--bg-string);">"left"</span> . uri0) (<span style="color: var(--clr-string); background-color: var(--bg-string);">"link1"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"uri1"</span>) ... (<span style="color: var(--clr-string); background-color: var(--bg-string);">"linkN"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"uriN"</span>))
</pre>
</div></div>
<ul class="org-ul">
<li><code>left</code> will be displayed as anchor text, and hyperlinked if <code>uri0</code> is non-nil.</li>
<li><code>link1</code> &#x2026; <code>linkN</code> will be hyperlinks, collapsed into a drawer for mobile viewers.</li>
</ul></li>
</ul></li>

<li><p>
These variables may also be set globally, and then used or overridden during interactive export. For example:
</p>

<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>EMACS-LISP</span><button class='copyBtn' name=btn_2ec7efbe9f534bfa94fbe9f040fe0dba>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_2ec7efbe9f534bfa94fbe9f040fe0dba=document.querySelector('button[name=btn_2ec7efbe9f534bfa94fbe9f040fe0dba]');
copyBtnbtn_2ec7efbe9f534bfa94fbe9f040fe0dba.addEventListener('click', function(event) {
let res = copyTextToClipboard(`(setq nice-org-html-header\n      '((\"title\" . \"/home.html\")\n        (\"foo\" . \"/foo.html\") (\"bar\" . \"/bar.html\")))\n;; Or: (setq nice-org-html-header \"path/to/your/header.html\")\n\n(setq nice-org-html-footer\n      '((\"© author\" . \"mailto:a@b.c\")\n        (\"oof\" . \"https://oof.a\") (\"rab\" . \"https://rab.b\")))\n;; Or: (setq nice-org-html-header \"path/to/your/footer.html\")\n\n(setq nice-org-html-css \"path/to/your/style.css\")\n\n(setq nice-org-html-js \"path/to/your/script.js\")\n\n(setq nice-org-html-options '(:layout \"compact\" :collapsing t))\n`);copyBtnbtn_2ec7efbe9f534bfa94fbe9f040fe0dba.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_2ec7efbe9f534bfa94fbe9f040fe0dba.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-header
      '((<span style="color: var(--clr-string); background-color: var(--bg-string);">"title"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"/home.html"</span>)
        (<span style="color: var(--clr-string); background-color: var(--bg-string);">"foo"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"/foo.html"</span>) (<span style="color: var(--clr-string); background-color: var(--bg-string);">"bar"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"/bar.html"</span>)))
<span style="color: var(--clr-comment-delimiter); background-color: var(--bg-comment-delimiter);">;; </span><span style="color: var(--clr-comment); background-color: var(--bg-comment);">Or: (setq nice-org-html-header "path/to/your/header.html")</span>

(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-footer
      '((<span style="color: var(--clr-string); background-color: var(--bg-string);">"&#169; author"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"mailto:a@b.c"</span>)
        (<span style="color: var(--clr-string); background-color: var(--bg-string);">"oof"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"https://oof.a"</span>) (<span style="color: var(--clr-string); background-color: var(--bg-string);">"rab"</span> . <span style="color: var(--clr-string); background-color: var(--bg-string);">"https://rab.b"</span>)))
<span style="color: var(--clr-comment-delimiter); background-color: var(--bg-comment-delimiter);">;; </span><span style="color: var(--clr-comment); background-color: var(--bg-comment);">Or: (setq nice-org-html-header "path/to/your/footer.html")</span>

(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-css <span style="color: var(--clr-string); background-color: var(--bg-string);">"path/to/your/style.css"</span>)

(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-js <span style="color: var(--clr-string); background-color: var(--bg-string);">"path/to/your/script.js"</span>)

(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">setq</span> nice-org-html-options '(<span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:layout</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"compact"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:collapsing</span> t))
</pre>
</div></div></li>
</ul>
</div>
</div>
<div id="outline-container-org939102f" class="outline-3">
<h3 id="org939102f">Publishing</h3>
<div class="outline-text-3" id="text-org939102f">
<ul class="org-ul">
<li><p>
This package is particularly well-suited to <i>publishing</i> Org <i>projects</i>, as websites comprised of many linked pages. The included publishing function, <code>nice-org-html-publish-to-html</code>, relies on global values for all of the above variables. To use it, in specifying the value of <code>org-publish-projects-alist</code>, for a given project just specify:
</p>

<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>EMACS-LISP</span><button class='copyBtn' name=btn_4da8c154606f4e8c9c61073747c66720>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_4da8c154606f4e8c9c61073747c66720=document.querySelector('button[name=btn_4da8c154606f4e8c9c61073747c66720]');
copyBtnbtn_4da8c154606f4e8c9c61073747c66720.addEventListener('click', function(event) {
let res = copyTextToClipboard(`;; ...\n:publishing-function #'nice-org-html-publish-to-html\n;; ...\n`);copyBtnbtn_4da8c154606f4e8c9c61073747c66720.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_4da8c154606f4e8c9c61073747c66720.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: var(--clr-comment-delimiter); background-color: var(--bg-comment-delimiter);">;; </span><span style="color: var(--clr-comment); background-color: var(--bg-comment);">...</span>
<span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:publishing-function</span> #'nice-org-html-publish-to-html
<span style="color: var(--clr-comment-delimiter); background-color: var(--bg-comment-delimiter);">;; </span><span style="color: var(--clr-comment); background-color: var(--bg-comment);">...</span>
</pre>
</div></div></li>

<li><p>
For more granular per-project configuration, there is a publishing-function-generating macro, <code>nice-org-html-publishing-function</code>, which takes values for the above configuration variables, and defines a publishing function unique to that invocation. Note: the options plist is constructed out of remaining arguments to this macro, so options should be specified directly. For example, your per-project configuration - i.e. the value of <code>org-publish-projects-alist</code> - may look something like this:
</p>

<div class='org-src-wrapper'>
<div class='org-src-bar'><span class='srcLangLabel'>EMACS-LISP</span><button class='copyBtn' name=btn_68ead5cb756b43b6b9868f4f05d35de9>&#10697;</button>
<script type='text/javascript'>
var copyBtnbtn_68ead5cb756b43b6b9868f4f05d35de9=document.querySelector('button[name=btn_68ead5cb756b43b6b9868f4f05d35de9]');
copyBtnbtn_68ead5cb756b43b6b9868f4f05d35de9.addEventListener('click', function(event) {
let res = copyTextToClipboard(`\`((\"project-x/files\"\n   :base-extension \"org\"\n   :base-directory \"path/to/source-x/\"       \n   :publishing-directory \"path/to/target-x/\"\n   ;; ...\n   :publishing-function\n   ,(nice-org-html-publishing-function\n     :theme-alist ((light . spacemacs-light) (dark . spacemacs-dark))\n     :default-mode dark\n     :headline-bullets (:h1 \"\" :h2 \"✸\" :h3 \"▷\" :h4 \"\" :h5 \"\")\n     :clr-defs ((light . (:note \"#ffc0cb\"))     ;; notes pink in light mode\n                (dark  . (:warning \"#ff4800\"))) ;; warnings orange in dark mode         \n     :header \"path/to/your/header.html\"\n     :footer \"path/to/your/footer.html\"\n     :css \"path/to/your/style.css\"\n     :js \"path/to/your/script.js\"\n     :layout \"compact\"\n     :collapsing t)))\n\n`);copyBtnbtn_68ead5cb756b43b6b9868f4f05d35de9.innerHTML = res ? '&#10003;' : 'error';setTimeout(() => { copyBtnbtn_68ead5cb756b43b6b9868f4f05d35de9.innerHTML = '&#10697;'}, 3000);
});
</script>
</div><div class="org-src-container">
<pre class="src src-emacs-lisp">`((<span style="color: var(--clr-string); background-color: var(--bg-string);">"project-x/files"</span>
   <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:base-extension</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"org"</span>
   <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:base-directory</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"path/to/source-x/"</span>       
   <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:publishing-directory</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"path/to/target-x/"</span>
   <span style="color: var(--clr-comment-delimiter); background-color: var(--bg-comment-delimiter);">;; </span><span style="color: var(--clr-comment); background-color: var(--bg-comment);">...</span>
   <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:publishing-function</span>
   ,(<span style="color: var(--clr-keyword); background-color: var(--bg-keyword);">nice-org-html-publishing-function</span>
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:theme-alist</span> ((light . spacemacs-light) (dark . spacemacs-dark))
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:default-mode</span> dark
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:headline-bullets</span> (<span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h1</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">""</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h2</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"&#10040;"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h3</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"&#9655;"</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h4</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">""</span> <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:h5</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">""</span>)
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:clr-defs</span> ((light . (<span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:note</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#ffc0cb"</span>))     <span style="color: var(--clr-comment-delimiter); background-color: var(--bg-comment-delimiter);">;; </span><span style="color: var(--clr-comment); background-color: var(--bg-comment);">notes pink in light mode</span>
                (dark  . (<span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:warning</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"#ff4800"</span>))) <span style="color: var(--clr-comment-delimiter); background-color: var(--bg-comment-delimiter);">;; </span><span style="color: var(--clr-comment); background-color: var(--bg-comment);">warnings orange in dark mode         </span>
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:header</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"path/to/your/header.html"</span>
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:footer</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"path/to/your/footer.html"</span>
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:css</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"path/to/your/style.css"</span>
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:js</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"path/to/your/script.js"</span>
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:layout</span> <span style="color: var(--clr-string); background-color: var(--bg-string);">"compact"</span>
     <span style="color: var(--clr-builtin); background-color: var(--bg-builtin);">:collapsing</span> t)))

</pre>
</div></div>

<ul class="org-ul">
<li>Any variable for which values are not specified will take the global (or default) value.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc4b494b" class="outline-2">
<h2 id="orgc4b494b">Things to keep in mind</h2>
<div class="outline-text-2" id="text-orgc4b494b">
<div class='admonition important'><div class='admonition-title important'>Important</div><div class='admonition-content important'><p>
For downloaded themes, you must run <code>M-x load-theme</code> at some point <i>before</i> exporting or publishing, so that Emacs "recognizes" the theme as safe to load. 
</p>
</div></div>

<div class='admonition tip'><div class='admonition-title tip'>Tip</div><div class='admonition-content tip'><p>
You can specify <code>""</code> as the bullet for a headline level to omit bullets for that level.
</p>
</div></div>

<div class='admonition note'><div class='admonition-title note'>Note</div><div class='admonition-content note'><p>
The HTML specified by <code>nice-org-html-header</code> and <code>nice-org-html-footer</code> will inherit the package default styling, unless further styling for these is defined in the file specified by <code>nice-org-html-css</code>.
</p>
</div></div>

<div class='admonition tip'><div class='admonition-title tip'>Tip</div><div class='admonition-content tip'><ul class="org-ul">
<li>For easy CSS customization, the contents of each user-specified HTML file are wrapped together in a <code>&lt;div&gt;</code> element; with id = 'injected-header' and id = 'injected-footer', respectively, and both with class = 'injected'.</li>

<li>The CSS specified by <code>nice-org-html-css</code> may also use the CSS variables defined in nice-org-html.css, which ultimately refer to Emacs face attribute values determined by your chosen themes.</li>

<li>The CSS specified by <code>nice-org-html-css</code> may override the default styling.</li>
</ul>
</div></div>
</div>
</div>
<div id="outline-container-orgc377426" class="outline-2">
<h2 id="orgc377426">Contributing</h2>
<div class="outline-text-2" id="text-orgc377426">
<ul class="org-ul">
<li>If you find a bug and want it fixed, please raise an issue.</li>
<li>If you would like to add or refine something feel free to:
<ol class="org-ol">
<li>Fork the repo</li>
<li>Clone your fork and develop / use it</li>
<li>Create a pull request &#x2013; I'll probably approve it</li>
</ol></li>
<li>Note: there are so many themes for Emacs, that it's tough to make them all render nicely with a uniform mapping of face-attributes to CSS variables. But fear not! If you find that this package doesn't "play nice" with your preferred theme, there is a built-in mechanism for re-mapping variables on a per-theme basis, precisely to handle these outliers. Just raise an issue, or take a look at the CSS specific to 'leuven' themes and create a PR with something similar.</li>
</ul>
</div>
</div>
<div id="outline-container-org18a30ae" class="outline-2">
<h2 id="org18a30ae">Credits</h2>
<div class="outline-text-2" id="text-org18a30ae">
<ul class="org-ul">
<li>All of the theme developers, without which this package would be useless.</li>
<li>Shi Tianshu's <a href="https://github.com/DogLooksGood/org-html-themify?tab=readme-ov-file">org-html-themify</a> provided the basic model for CSS interpolation.</li>
<li>Various stackoverflow posts were of great help, but alas, I've lost the links.</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
if (!document.cookie.split('; ').find(r => r.startsWith('mode'))) {
document.cookie = 'mode=dark'
}
document.cookie = 'light=solarized-light'
document.cookie = 'dark=tomorrow-night-eighties'
/*
;; nice-org-html.js
;;==============================================================================
;; Copyright (C) 2024, Ewan Townshend

;; Author: Ewan Townshend
;; URL: https://github.com/ewantown/nice-org-html
;; Version: 1.2

;;==============================================================================
;; This program is free software; you can redistribute it and/or modify
;; it under the terms of the GNU General Public License as published by
;; the Free Software Foundation, either version 3 of the License, or
;; (at your option) any later version.

;; This program is distributed in the hope that it will be useful,
;; but WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;; GNU General Public License for more details.

;; You should have received a copy of the GNU General Public License
;; along with this program.  If not, see <https://www.gnu.org/licenses/>.

;; This file is not part of emacs.

;;==============================================================================
;; JS for html exported by et-org-html.el
 */

const preamble = document.getElementById("preamble");
const content = document.getElementById("content");
const postamble = document.getElementById("postamble");

const controls = document.getElementById("view-controls");
const toggleTocBtn = document.getElementById("toggle-toc");
const gotoTopBtn = document.getElementById("goto-top");
const toggleModeBtn = document.getElementById("toggle-mode");
const toc = document.getElementById("table-of-contents");

// Get and parse options passed in cookie string
const optCookie = document.cookie.split('; ').find(r => r.startsWith('options'));
const options = {};
if (optCookie) {
  optCookie.split('=')[1].split('__').forEach(pair => {
    const [key, val] = pair.split(':');
    if (key && val) {
      options[key] = val;
    }
  })
}

// Move sticky control bar (injected within preamble)
document.body.insertBefore(controls, content);

// Mode handling
function getMode() {
  let cookie = document.cookie.split('; ').find(r => r.startsWith('mode'))
  return cookie && cookie.split("=")[1];
}

function setMode(mode) {
  document.body.dataset.mode = mode;
  let thmCookie = document.cookie.split('; ').find(r => r.startsWith(mode));
  document.body.dataset.theme = thmCookie ? thmCookie.split('=')[1] : 'unknown';
  toggleModeBtn.innerHTML = (mode === 'light') ? '&#9789;' : '&#9788;';
  document.cookie = 'mode=' + mode;
}

// Initially, set mode based on stored cookie
let mode = getMode();
if (mode && ["light", "dark"].includes(mode)) {
  setMode(mode);
} else {  
  let prop = "prefers-color-scheme";
  let pref = (mode === "query") && window.matchMedia &&
    ["light", "dark"].find(s => window.matchMedia(`(${prop}: ${s})`).matches);
  setMode(pref || "dark"); // fallback: dark
}

// Mode toggling
toggleModeBtn.addEventListener('click', () => {
  setMode(document.body.dataset.mode === 'dark' ? 'light' : 'dark');
})


// Jump to top
let scrollY = document.documentElement.scrollTop;
window.addEventListener('scroll', () => {
  let atTop = document.documentElement.scrollTop <= preamble.offsetHeight;
  gotoTopBtn.dataset.show = !atTop + "";
});
gotoTopBtn.addEventListener('click', () => {
  window.scrollTo({
    top: 0,
    behavior: "smooth"
  });
})

// Table-of-contents toggling
if (toc) {
  toggleTocBtn.dataset.show = 'true';
  toggleTocBtn.addEventListener('click', () => {
    let showingToc = document.body.dataset.toc;
    scrollY = showingToc ? scrollY : document.documentElement.scrollTop;
    if (showingToc) {
      document.body.dataset.toc = '';
      document.documentElement.scrollTop = scrollY;
    } else {
      let tocHeight =
	Math.max(
	  window.innerHeight - controls.offsetHeight,
	  toc.offsetHeight
	);
      const header = document.getElementById("injected-header");
      if (header && (scrollY > header.offsetHeight)) {
	document.documentElement.scrollTop = preamble.offsetHeight;
      }
      toc.style.height = `${tocHeight}px`;
      document.body.dataset.toc = 'true';
    }
    toc.addEventListener('click', () => {
      if (document.body.dataset.toc) {
	document.body.dataset.toc = '';
	document.documentElement.scrollTop = scrollY;
      }
    })
  })
};

// Instrument anchor linking for sticky control bar
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', (e) => {
    e.preventDefault();
    const targetId = e.currentTarget.getAttribute('href');
    const target = document.querySelector(targetId);

    setTimeout(() => {
      const targetPos = target.getBoundingClientRect().top;
      let offset = targetPos + document.documentElement.scrollTop;
      offset -= controls.offsetHeight;
      window.scrollTo({
	top: offset,
	behavior: "smooth"
      });
    }, 0);
  });
});

function copyTextToClipboard(text) {
  // Make invisible textarea
  var textArea = document.createElement("textarea");
  textArea.style.position = 'fixed';
  textArea.style.top = 0;
  textArea.style.left = 0;
  textArea.style.width = '2em';
  textArea.style.height = '2em';
  textArea.style.padding = 0;
  textArea.style.border = 'none';
  textArea.style.outline = 'none';
  textArea.style.boxShadow = 'none';
  textArea.style.background = 'transparent';

  // Copy contents into it
  textArea.value = text;

  // Try to copy from it to clipboard
  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();
  var res;
  try {
    res = document.execCommand('copy');
  } catch (err) {
    res = false;
  }

  // Remove invisible textarea
  document.body.removeChild(textArea);

  return res;
}

// Handle the default header / footer drawers
const header = document.getElementById("generated-header");
const footer = document.getElementById("generated-footer");

if (header) {
  let toggle = header.querySelector("header nav input.nav-toggle");
  if (toggle) { toggle.checked = false; }
}
if (footer) {
  let nav = footer.querySelector("nav");
  let toggle = nav && nav.querySelector(".nav-toggle");
  let navList = nav && nav.querySelector(".nav-list");
  let navElem = navList && [...navList.querySelectorAll(".nav-item")];
  let numLink = navElem && navElem.length;
  if (numLink) {
    toggle.checked = false;
    toggle.addEventListener('change', () => {
      if (toggle.checked) {
	setTimeout(() => window.scrollTo({
	  behavior: 'smooth',
	  top: document.body.scrollHeight	  
	}), 88);
      }
   });
  }
}

function autoCompact() {
  var anchor, links, overlap, trivial;
  const domCompute = (node) => {
    if (node) {
      anchor = node.querySelector('.nav-title, .nav-author');
      links = node.querySelector('.nav-list');
      overlap = links.offsetLeft - 5 <= anchor.offsetLeft + anchor.offsetWidth;	
      trivial = links.offsetLeft === anchor.offsetLeft;
    }
  };
  let mediaMatch = window.matchMedia('(max-width: 768px)').matches;
  [header, footer].forEach(e => {
    if (e) {
      if (mediaMatch) {
	e.classList.add('compact');
      } else {
	domCompute(e);
	if (overlap && !trivial) {
	  e.classList.add('compact');
	} else {	
	  let clone = e.cloneNode(true);
	  clone.style.top = '-2000px';
	  clone.style.maxHeight = '0px';
	  clone.classList.remove('compact');
	  e.parentNode.insertBefore(clone, e);
	  domCompute(clone);
	  let toggle = e.querySelector('.nav-toggle');
	  if (!overlap && toggle && !toggle.checked) {
	    e.classList.remove('compact');
	  }
	  e.parentNode.removeChild(clone);
	}
      }
    }
  })
}

if ((header || footer)) {
  if (options.hasOwnProperty('layout')) {
    [header, footer].forEach(e => e ? e.classList.add(options.layout) : null);
  } else {
    autoCompact();
    window.addEventListener('resize', autoCompact);
  }
}

if (options.hasOwnProperty('src-lang') && options['src-lang'] == 't') {
  let labels = [...document.querySelectorAll('.srcLangLabel')];
  labels.forEach(l => l.style.display = 'inline-block');
}

if (options.hasOwnProperty('collapsing') && options.collapsing == 't') {
  let levels = [2, 3, 4, 5, 6];
  let containerPrefix = 'outline-container-';
  levels.forEach(l => {
    let containers = [...document.querySelectorAll(`.outline-${l}`)];
    containers.forEach(c => {
      let id = c.id.slice(containerPrefix.length);
      let headline = document.getElementById(id);
      let siblings = [...c.children].filter(child => child.id != id);
      headline.classList.add('collapsible');
      headline.addEventListener('click', () => {	
	if (headline.classList.contains('collapsed')) {
	  headline.classList.remove('collapsed');
	  siblings.forEach(child => {
	    child.classList.remove('hidden');
	  });	  
	} else {
	  headline.classList.add('collapsed');
	  siblings.forEach(child => {
	    child.classList.add('hidden');
	  });
	}
      })
    })
  })
}
/*]]>*/-->
</script><div hidden>Generated by: https://github.com/ewantown/nice-org-html</div>
</div>
</body>
</html>
